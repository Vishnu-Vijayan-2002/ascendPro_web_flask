<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>All Job Vacancies - AscendPro Admin</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/job-style.css') }}">
</head>
<body>
    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="logo">AscendPro</div>
            <button class="sidebar-toggle" id="sidebarToggle">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>

        <nav class="sidebar-nav">
            <a href="/admin/dashboard" class="nav-item">
                <span class="icon">üìä</span>
                <span class="text">Dashboard</span>
            </a>
            <a href="/admin/pending-users" class="nav-item">
                <span class="icon">‚úì</span>
                <span class="text">Approve Users</span>
                <span class="badge">12</span>
            </a>
            <a href="/admin/jobs" class="nav-item active">
                <span class="icon">üíº</span>
                <span class="text">View Jobs</span>
            </a>
            <a href="/admin/users" class="nav-item">
                <span class="icon">üë•</span>
                <span class="text">Manage Users</span>
            </a>
            <a href="/admin/companies" class="nav-item">
                <span class="icon">üè¢</span>
                <span class="text">Companies</span>
            </a>
            <a href="/admin/applicants" class="nav-item">
                <span class="icon">üë§</span>
                <span class="text">Applicants</span>
            </a>
            <a href="/admin/analytics" class="nav-item">
                <span class="icon">üìà</span>
                <span class="text">Analytics</span>
            </a>
            <a href="/admin/settings" class="nav-item">
                <span class="icon">‚öôÔ∏è</span>
                <span class="text">Settings</span>
            </a>
        </nav>

        <div class="sidebar-footer">
            <div class="admin-profile">
                <div class="avatar">AD</div>
                <div class="admin-info">
                    <div class="name">Admin User</div>
                    <div class="role">Administrator</div>
                </div>
            </div>
            <a href="/logout" class="logout-btn">
                <span class="icon">üö™</span>
                <span class="text">Logout</span>
            </a>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Top Bar -->
        <header class="top-bar">
            <div class="top-bar-left">
                <button class="mobile-menu-btn" id="mobileMenuBtn">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
                <div class="breadcrumb">
                    <a href="/admin/dashboard">Dashboard</a>
                    <span class="separator">/</span>
                    <span class="current">All Jobs</span>
                </div>
            </div>
            <div class="top-bar-right">
                <button class="notification-btn">
                    <span class="icon">üîî</span>
                    <span class="badge">5</span>
                </button>
                <div class="admin-avatar">AD</div>
            </div>
        </header>

        <!-- Page Content -->
        <div class="page-content">
            <!-- Page Header -->
            <div class="page-header">
                <div class="header-left">
                    <h1>All Job Vacancies</h1>
                    <p>Manage and monitor all job postings on the platform</p>
                </div>
                <div class="header-actions">
                    <button class="btn-secondary" onclick="exportData()">
                        <span class="icon">üì•</span>
                        <span>Export</span>
                    </button>
                    <button class="btn-primary" onclick="addNewJob()">
                        <span class="icon">‚ûï</span>
                        <span>Add Job</span>
                    </button>
                </div>
            </div>

            <!-- Stats Cards -->
            <div class="stats-row">
                <div class="stat-mini">
                    <div class="stat-icon total">üíº</div>
                    <div class="stat-info">
                        <div class="stat-value" id="totalJobs">0</div>
                        <div class="stat-label">Total Jobs</div>
                    </div>
                </div>
                <div class="stat-mini">
                    <div class="stat-icon active">‚úì</div>
                    <div class="stat-info">
                        <div class="stat-value" id="activeJobs">0</div>
                        <div class="stat-label">Active</div>
                    </div>
                </div>
                <div class="stat-mini">
                    <div class="stat-icon pending">‚è≥</div>
                    <div class="stat-info">
                        <div class="stat-value" id="pendingJobs">0</div>
                        <div class="stat-label">Pending</div>
                    </div>
                </div>
                <div class="stat-mini">
                    <div class="stat-icon companies">üè¢</div>
                    <div class="stat-info">
                        <div class="stat-value" id="totalCompanies">0</div>
                        <div class="stat-label">Companies</div>
                    </div>
                </div>
            </div>

            <!-- Table Container -->
            <div class="table-container">
                <!-- Table Controls -->
                <div class="table-controls">
                    <div class="search-filter">
                        <div class="search-box">
                            <span class="search-icon">üîç</span>
                            <input type="text" id="searchInput" placeholder="Search jobs, companies...">
                        </div>
                        <select class="filter-select" id="statusFilter">
                            <option value="">All Status</option>
                            <option value="active">Active</option>
                            <option value="pending">Pending</option>
                            <option value="closed">Closed</option>
                        </select>
                        <select class="filter-select" id="sortBy">
                            <option value="recent">Most Recent</option>
                            <option value="title">Title A-Z</option>
                            <option value="company">Company A-Z</option>
                        </select>
                    </div>
                    <div class="view-options">
                        <button class="view-btn active" data-view="table">
                            <span>üìã</span>
                        </button>
                        <button class="view-btn" data-view="grid">
                            <span>‚äû</span>
                        </button>
                    </div>
                </div>

                <!-- Table -->
                <div class="table-wrapper">
                    <table class="jobs-table">
                        <thead>
                            <tr>
                                <th>
                                    <input type="checkbox" id="selectAll">
                                </th>
                                <th>ID</th>
                                <th>Job Title</th>
                                <th>Description</th>
                                <th>Company</th>
                                <th>Status</th>
                                <th>Posted</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="jobsTableBody">
                            <!-- Jobs will be dynamically inserted here -->
                            <!-- Template row for Jinja2/Flask rendering -->
                            {% for j in jobs %}
                            <tr class="job-row" data-job-id="{{ j[0] }}">
                                <td>
                                    <input type="checkbox" class="row-checkbox">
                                </td>
                                <td class="job-id">#{{ j[0] }}</td>
                                <td class="job-title">
                                    <div class="title-cell">
                                        <span class="title">{{ j[1] }}</span>
                                        <span class="meta">Full-time ‚Ä¢ Remote</span>
                                    </div>
                                </td>
                                <td class="job-description">
                                    <div class="description-cell">{{ j[2] }}</div>
                                </td>
                                <td class="company-cell">
                                    <div class="company-info">
                                        <div class="company-avatar">{{ j[3][:2] if j[3] else 'CO' }}</div>
                                        <div class="company-details">
                                            <span class="company-name">Company #{{ j[3] }}</span>
                                            <span class="company-id">ID: {{ j[3] }}</span>
                                        </div>
                                    </div>
                                </td>
                                <td>
                                    <span class="status-badge active">Active</span>
                                </td>
                                <td class="posted-date">2 days ago</td>
                              <td class="actions-cell">
    <div class="action-buttons">
        <button class="action-btn view" title="View Details" onclick="viewJob('{{ j[0] }}')">
            <span>üëÅÔ∏è</span>
        </button>
        <button class="action-btn edit" title="Edit Job" onclick="editJob('{{ j[0] }}')">
            <span>‚úèÔ∏è</span>
        </button>
        <button class="action-btn delete" title="Delete Job" onclick="deleteJob('{{ j[0] }}')">
            <span>üóëÔ∏è</span>
        </button>
    </div>
</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>

                <!-- Pagination -->
                <div class="pagination">
                    <div class="pagination-info">
                        Showing <span id="showingStart">1</span> to <span id="showingEnd">10</span> of <span id="totalRecords">0</span> jobs
                    </div>
                    <div class="pagination-controls">
                        <button class="page-btn" id="prevBtn">
                            <span>‚Üê</span>
                        </button>
                        <button class="page-btn active">1</button>
                        <button class="page-btn">2</button>
                        <button class="page-btn">3</button>
                        <button class="page-btn">...</button>
                        <button class="page-btn">10</button>
                        <button class="page-btn" id="nextBtn">
                            <span>‚Üí</span>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Back Button -->
            <div class="back-section">
                <a href="/admin/dashboard" class="btn-back">
                    <span class="icon">‚Üê</span>
                    <span>Back to Dashboard</span>
                </a>
            </div>
        </div>
    </main>

    <!-- Job Details Modal -->
    <div class="modal" id="jobModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Job Details</h2>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body" id="modalBody">
                <!-- Job details will be loaded here -->
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" onclick="closeModal()">Close</button>
                <button class="btn-primary" onclick="editFromModal()">Edit Job</button>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/admin-jobs.js') }}"></script>
</body>
</html>